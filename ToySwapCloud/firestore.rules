rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
   
   match /itemCategories/{document} {
   allow read
   allow write : if false
   }
   
   match /items/{document}{
   allow read
   allow write : if false
   }
   
   match /users/{uid} {
  	allow write: if request.auth.uid == uid ;
    allow read : if request.auth.uid == uid ||
    get(/databases/$(database)/documents/users/$(request.auth.uid)).data.admin == true;
 	 	}
    
    match /usersPublicInfo/{uid} {
    allow write: if request.auth.uid == uid ;
    allow read : if request.auth.uid == uid ||
    get(/databases/$(database)/documents/users/$(request.auth.uid)).data.admin == true;
    }
    
  }
}